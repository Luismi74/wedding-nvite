class WMCountdownTimer{static emitEvent(t,e={},i=document){if(!t)return;let n=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:e});return i.dispatchEvent(n)}constructor(t){t.setAttribute("data-loading-state","loading"),this.el=t,this.countdownDate=new Date(t.countdownDate);const e=t.getAttribute("data-date");if(e){const i=new Date(e);if(isNaN(i)||"Invalid Date"===i){const e=document.createElement("p");e.classList.add("show-in-editor"),e.innerHTML="Invalid Date format used. Be sure to use the format <em>YYYY-MM-DD</em>T<em>HH:MM:SS</em>",t.append(e)}else this.countdownDate=i}this.timezone=t.timezone,this.individualTimezone=t.getAttribute("data-timezone"),this.individualTimezone&&(this.timezone=this.individualTimezone),this.init()}init(){this.setWidth(),this.updateCountdown(),this.dividers(),this.bindEvents(),this.resizeEvent(),WMCountdownTimer.emitEvent("wmCountdownTimer:loaded")}dividers(){if("ddhh"===this.el.countdownFormat){let t=this.el.querySelector(".minute-divider"),e=this.el.querySelector(".hour-divider");t.style.display="none",e.style.display="none"}else if("hhmmss"===this.el.countdownFormat){this.el.querySelector(".day-divider").style.display="none"}}setWidth(){let t=this.el.querySelector(".countdown-section");if("block"===window.getComputedStyle(t).display){const t=this.el.querySelectorAll('[data-wm-plugin="countdown-timer"] .digits');let e=0;t.forEach((t=>{t.style.minWidth="";const i=t.offsetWidth;i>e&&(e=i)})),t.forEach((t=>{t.style.minWidth=e+"px"}))}}updateCountdown(){const t=setInterval((()=>{let e;e="Local"===this.timezone?(new Date).getTime():new Date((new Date).toLocaleString("en-US",{timeZone:this.timezone})).getTime();let i=this.countdownDate.getTime()-e,n=this.el.querySelector(".wm-countdown .days .digits .day-digit"),o=this.el.querySelector(".wm-countdown .hours .digits .hour-digit"),d=this.el.querySelector(".wm-countdown .minutes .digits .minute-digit"),s=this.el.querySelector(".wm-countdown .seconds .digits .second-digit");if("ddhhmmss"===this.el.countdownFormat){let t=Math.floor(i/864e5),e=Math.floor(i%864e5/36e5),l=Math.floor(i%36e5/6e4),a=Math.floor(i%6e4/1e3);t=t<10?"0"+t:t,e=e<10?"0"+e:e,l=l<10?"0"+l:l,a=a<10?"0"+a:a,n.innerHTML=t,o.innerHTML=e,d.innerHTML=l,s.innerHTML=a}else if("hhmmss"===this.el.countdownFormat){let t=Math.floor(i/36e5),e=Math.floor(i%36e5/6e4),l=Math.floor(i%6e4/1e3);t=t<10?"0"+t:t,e=e<10?"0"+e:e,l=l<10?"0"+l:l,o.innerHTML=t,d.innerHTML=e,s.innerHTML=l,this.el.querySelector(".days .text").style.display="none",n.parentElement.style.display="none"}else if("ddhh"===this.el.countdownFormat){let t=Math.floor(i/864e5),e=Math.floor(i%864e5/36e5);t=t<10?"0"+t:t,e=e<10?"0"+e:e,n.innerHTML=t,o.innerHTML=e;let l=this.el.querySelector(".minutes .text"),a=this.el.querySelector(".seconds .text");l.style.display="none",a.style.display="none",d.parentElement.style.display="none",s.parentElement.style.display="none"}if((isNaN(i)||i<0)&&(i=0),i<=0)return n.innerHTML="00",o.innerHTML="00",d.innerHTML="00",s.innerHTML="00",clearInterval(t),void this.el.setAttribute("data-loading-state","complete");this.el.setAttribute("data-loading-state","complete")}),1e3)}bindEvents(){this.addPluginLoadedListener()}addPluginLoadedListener(){document.addEventListener("wmCountdownTimer:loaded",(()=>{window.setTimeout((()=>{}),1e3)}))}resizeEvent(){const t=this.throttle(this.setWidth.bind(this),250);window.addEventListener("resize",t)}throttle(t,e){let i,n;return function(){const o=this,d=arguments;n?(clearTimeout(i),i=setTimeout((function(){Date.now()-n>=e&&(t.apply(o,d),n=Date.now())}),e-(Date.now()-n))):(t.apply(o,d),n=Date.now())}}}!function(){const t=window.wmCountdownTimerSettings?window.wmCountdownTimerSettings:{},e=function t(...e){function i(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}function n(e,n){for(let[o,d]of Object.entries(n)){let n=i(d);void 0!==e[o]&&i(e[o])===n&&["array","object"].includes(n)?e[o]=t(e[o],d):e[o]=structuredClone(d)}}let o=structuredClone(e.shift());for(let t of e){let e=i(t);i(o)===e?"array"===e?o=[...o,...structuredClone(t)]:"object"===e?n(o,t):o=t:o=structuredClone(t)}return o}({},{date:new Date(Date.now()),dayTag:"Dias",hourTag:"Horas",minuteTag:"Minutos",secondTag:"Segundos",countdownFormat:"ddhhmmss",timezone:"Local",digitStyle:"h4",textStyle:"h4"},t);function i(t,i){t.countdownDate=e.date,t.countdownFormat=e.countdownFormat,t.timezone=e.timezone,t.innerHTML=`\n    <div class="wm-countdown" data-wm-plugin="countdown-timer">\n      <div class="days countdown-section"> <div class="digits"><${e.digitStyle} class="day-digit digit">0</${e.digitStyle}></div> <div class="text"><${e.textStyle}>${e.dayTag}</${e.textStyle}></div></div>\n\n      <div class="divider day-divider"><span class="colon">:</span></div>\n       \n      <div class="hours countdown-section"> <div class="digits"><${e.digitStyle} class="hour-digit digit">0</${e.digitStyle}></div> <div class="text"><${e.textStyle}>${e.hourTag}</${e.textStyle}></div></div>\n\n      <div class="divider hour-divider"><span class="colon">:</span></div>\n    \n      <div class="minutes countdown-section"> <div class="digits"><${e.digitStyle} class="minute-digit digit">0</${e.digitStyle}></div> <div class="text"><${e.textStyle}>${e.minuteTag}</${e.textStyle}></div></div>\n\n      <div class="divider minute-divider"><span class="colon">:</span></div>\n    \n      <div class="seconds countdown-section"> <div class="digits"><${e.digitStyle} class="second-digit digit">0</${e.digitStyle}></div><div class="text"><${e.textStyle}>${e.secondTag}</${e.textStyle}></div></div>\n    \n    </div>\n       `,t.wmCountdownTimer=new WMCountdownTimer(t)}function n(t){const e=t.getAttribute("href"),n=document.createElement("div");n.setAttribute("data-wm-plugin","countdown-timer"),n.classList.add("link"),n.setAttribute("data-href",e),t.parentNode.replaceChild(n,t),i(n)}let o=document.querySelectorAll('[data-wm-plugin="countdown-timer"]'),d=document.querySelectorAll('a[href*="#wm-countdown"], a[href*="#wm-countdown"]');window.location.origin;const s=document.querySelector(".sqs-announcement-bar-dropzone"),l=new MutationObserver((function(t){t.forEach((function(t){if(0!==t.addedNodes.length){if(s.textContent.includes("[countdown-timer]")){s.innerHTML=s.innerHTML.replace("[countdown-timer]",'<div data-wm-plugin="countdown-timer" class="announcement-countdown"></div>');i(s.querySelector('[data-wm-plugin="countdown-timer"]')),l.disconnect()}}}))}));s&&l.observe(s,{subtree:!1,childList:!0,attributes:!1});for(let t of o)i(t);for(let t of d)n(t),t.classList.add("link")}();